<?php     require_once("root.inc.php");     require_once($ROOT."library/auth.cls.php");     require_once($ROOT."library/textEncrypt.cls.php");     require_once($ROOT."library/datamodel.cls.php");     require_once($ROOT."library/currFunc.lib.php");     require_once($ROOT."library/dateFunc.lib.php");     require_once($APLICATION_ROOT."library/view.cls.php");             $view = new CView($_SERVER['PHP_SELF'],$_SERVER['QUERY_STRING']);     $dtaccess = new DataAccess();     $enc = new TextEncrypt();          $auth = new CAuth();     $table = new InoTable("table","100%","left");     $editPage = "item_edit.php?";     $thisPage = "item_view.php?";     if(!$auth->IsAllowed("pos_item",PRIV_READ)){          die("access_denied");         exit(1);              } elseif($auth->IsAllowed("pos_item",PRIV_READ)===1){         echo"<script>window.parent.document.location.href='".$GLOBAL_ROOT."login.php?msg=Session Expired'</script>";          exit(1);     }        $tipe["V"] = "Volume Based";     $tipe["N"] = "Non Valume Based";          $sql = "select a.*,b.grup_item_nama,c.satuan_beli_nama,d.satuan_jual_nama              from pos_item a              left join pos_grup_item b on a.id_grup_item=b.grup_item_id              left join pos_satuan_beli c on a.id_satuan_beli=c.satuan_beli_id              left join pos_satuan_jual d on a.id_satuan_jual=d.satuan_jual_id              order by item_nama";     $rs = $dtaccess->Execute($sql);     $dataTable = $dtaccess->FetchAll($rs);          //*-- config table ---*//     $tableHeader = "&nbsp;Setup Item";          $isAllowedDel = $auth->IsAllowed("pos_item",PRIV_DELETE);     $isAllowedUpdate = $auth->IsAllowed("pos_item",PRIV_UPDATE);     $isAllowedCreate = $auth->IsAllowed("pos_item",PRIV_CREATE);          // --- construct new table ---- //     $counterHeader = 0;     if($isAllowedDel){          $tbHeader[0][$counterHeader][TABLE_ISI] = "<input type=\"checkbox\" onClick=\"EW_selectKey(this,'cbDelete[]');\">";          $tbHeader[0][$counterHeader][TABLE_WIDTH] = "1%";          $counterHeader++;     }          if($isAllowedUpdate){          $tbHeader[0][$counterHeader][TABLE_ISI] = "Edit";          $tbHeader[0][$counterHeader][TABLE_WIDTH] = "1%";          $counterHeader++;     }          $tbHeader[0][$counterHeader][TABLE_ISI] = "Nama";     $tbHeader[0][$counterHeader][TABLE_WIDTH] = "30%";          $counterHeader++;          $tbHeader[0][$counterHeader][TABLE_ISI] = "Kode";     $tbHeader[0][$counterHeader][TABLE_WIDTH] = "10%";          $counterHeader++;          $tbHeader[0][$counterHeader][TABLE_ISI] = "Kategori";     $tbHeader[0][$counterHeader][TABLE_WIDTH] = "10%";          $counterHeader++;          $tbHeader[0][$counterHeader][TABLE_ISI] = "Harga Beli";     $tbHeader[0][$counterHeader][TABLE_WIDTH] = "10%";          $counterHeader++;          $tbHeader[0][$counterHeader][TABLE_ISI] = "Harga Jual";     $tbHeader[0][$counterHeader][TABLE_WIDTH] = "10%";          $counterHeader++;          $tbHeader[0][$counterHeader][TABLE_ISI] = "Stok";     $tbHeader[0][$counterHeader][TABLE_WIDTH] = "5%";          $counterHeader++;          $tbHeader[0][$counterHeader][TABLE_ISI] = "Satuan Jual";     $tbHeader[0][$counterHeader][TABLE_WIDTH] = "10%";          $counterHeader++;          $tbHeader[0][$counterHeader][TABLE_ISI] = "Satuan Beli";     $tbHeader[0][$counterHeader][TABLE_WIDTH] = "10%";          $counterHeader++;          $tbHeader[0][$counterHeader][TABLE_ISI] = "Isi";     $tbHeader[0][$counterHeader][TABLE_WIDTH] = "5%";          $counterHeader++;               $tbHeader[0][$counterHeader][TABLE_ISI] = "Pic";     $tbHeader[0][$counterHeader][TABLE_WIDTH] = "15%";          $counterHeader++;               for($i=0,$counter=0,$n=count($dataTable);$i<$n;$i++,$counter=0){          if($isAllowedDel) {               $tbContent[$i][$counter][TABLE_ISI] = '<input type="checkbox" name="cbDelete[]" value="'.$dataTable[$i]["item_id"].'">';                              $tbContent[$i][$counter][TABLE_ALIGN] = "center";               $counter++;          }                    if($isAllowedUpdate) {               $tbContent[$i][$counter][TABLE_ISI] = '<a href="'.$editPage.'&id='.$enc->Encode($dataTable[$i]["item_id"]).'"><img hspace="2" width="16" height="16" src="'.$APLICATION_ROOT.'images/b_edit.png" alt="Edit" title="Edit" border="0"></a>';                              $tbContent[$i][$counter][TABLE_ALIGN] = "center";               $counter++;          }                    $lokasi = $ROOT."admin/images/item";          $fotoName=$lokasi."/".$dataTable[$i]["item_pic"];                                        $tbContent[$i][$counter][TABLE_ISI] = $dataTable[$i]["item_nama"];           $tbContent[$i][$counter][TABLE_ALIGN] = "center";          $counter++;                    $tbContent[$i][$counter][TABLE_ISI] = $dataTable[$i]["item_kode"];           $tbContent[$i][$counter][TABLE_ALIGN] = "center";          $counter++;                    $tbContent[$i][$counter][TABLE_ISI] = $dataTable[$i]["grup_item_nama"];           $tbContent[$i][$counter][TABLE_ALIGN] = "center";          $counter++;                    $tbContent[$i][$counter][TABLE_ISI] = currency_format($dataTable[$i]["item_harga_beli"]);           $tbContent[$i][$counter][TABLE_ALIGN] = "right";          $counter++;                    $tbContent[$i][$counter][TABLE_ISI] = currency_format($dataTable[$i]["item_harga_jual"]);           $tbContent[$i][$counter][TABLE_ALIGN] = "right";          $counter++;                    $tbContent[$i][$counter][TABLE_ISI] = $dataTable[$i]["item_jumlah"];          $tbContent[$i][$counter][TABLE_ALIGN] = "center";          $counter++;                    $tbContent[$i][$counter][TABLE_ISI] = $dataTable[$i]["satuan_jual_nama"];          $tbContent[$i][$counter][TABLE_ALIGN] = "center";          $counter++;                    $tbContent[$i][$counter][TABLE_ISI] = $dataTable[$i]["satuan_beli_nama"];          $tbContent[$i][$counter][TABLE_ALIGN] = "center";          $counter++;                    $tbContent[$i][$counter][TABLE_ISI] = $dataTable[$i]["item_isi"];          $tbContent[$i][$counter][TABLE_ALIGN] = "center";          $counter++;                    $tbContent[$i][$counter][TABLE_ISI] = '<img hspace="2" width="50" height="50" name="img_game" id="img_game" src="'.$fotoName.'" valign="middle" border="1">';          $tbContent[$i][$counter][TABLE_ALIGN] = "left";                    $counter++;                        }          $colspan = count($tbHeader[0]);          if($isAllowedDel) {          $tbBottom[0][0][TABLE_ISI] = '&nbsp;&nbsp;<input type="submit" name="btnDelete" value="Hapus" class="button">&nbsp;';     }          if($isAllowedCreate) {          $tbBottom[0][0][TABLE_ISI] .= '&nbsp;&nbsp;<input type="button" name="btnAdd" value="Tambah Baru" class="button" onClick="document.location.href=\''.$editPage.'\'">&nbsp;';     }          $tbBottom[0][0][TABLE_WIDTH] = "100%";     $tbBottom[0][0][TABLE_COLSPAN] = $colspan;?><?php echo $view->RenderBody("inventori.css",false); ?><table width="100%" border="1" cellpadding="0" cellspacing="0">     <tr class="tableheader">          <td><?php echo $tableHeader;?></td>     </tr></table><form name="frmView" method="POST" action="<?php echo $editPage; ?>">     <?php echo $table->RenderView($tbHeader,$tbContent,$tbBottom); ?></form><?php echo $view->RenderBodyEnd(); ?>